(this["webpackJsonpmyemployees-react-app"]=this["webpackJsonpmyemployees-react-app"]||[]).push([[0],{155:function(e,t,a){e.exports=a(317)},160:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(10),o=a.n(l),c=(a(160),a(41)),s=a(35),i=a(36),m=a(38),u=a(37),p=a(39),d=a(320),h=d.a.Meta,E=function(e){var t=e.employee,a=e.handleLog;return n.a.createElement("div",{onClick:a.bind(null,t._id)},n.a.createElement(d.a,{hoverable:!0,className:"employee-card",cover:n.a.createElement("img",{alt:t.name,src:"avatar"===t.profilePicture?"/avatar.png":t.profilePicture})},n.a.createElement(h,{title:t.name,description:t.position})))},g=a(40),f=a.n(g),v="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",y=function(e){f.a.post("".concat(v,"/log"),e).catch((function(e){console.log("Log Error =====>",e.response.data.msg)}))},b=a(327),w="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",k=function(e,t){f.a.post("".concat(w,"/auth/signup"),e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user));var a={userId:e.data.user._id,logName:"User signup"};y(a),b.a.success(e.data.message),t.push("/")})).catch((function(e){b.a.error(e.response.data.msg)}))},O=function(e,t){f.a.post("".concat(w,"/auth/login"),e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user));var a={userId:e.data.user._id,logName:"User login"};y(a),b.a.success(e.data.msg),t.push("/")})).catch((function(e){b.a.error(e.response.data.msg)}))},N="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",S=a(325),j=a(326),P=a(9),I=a(16),x=a(318),C=a(324),D=a(319),L=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).showDrawer=function(){e.setState({visible:!0})},e.onClose=function(){e.setState({visible:!1})},e.state={visible:!1,placement:"left"},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return n.a.createElement("nav",{className:"nav"},n.a.createElement("div",{className:"mouseHover"},n.a.createElement(P.a,{onClick:this.showDrawer,type:"menu",className:"icon-nav"})),n.a.createElement("div",null,n.a.createElement(I.c,{to:"/"},n.a.createElement("span",{className:"nav-logo"},n.a.createElement("i",{className:"fas fa-search"})))),n.a.createElement("div",null,e?n.a.createElement(I.c,{to:"/profile"},n.a.createElement(x.a,{src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture})):null),n.a.createElement(C.a,{placement:this.state.placement,closable:!1,onClose:this.onClose,visible:this.state.visible,className:"drawer-wrapper"},n.a.createElement("div",null,n.a.createElement(I.b,{to:"/"},n.a.createElement(P.a,{type:"home"})," Home")),n.a.createElement(D.a,null),n.a.createElement("div",null,n.a.createElement(I.b,{to:"/chart"},n.a.createElement(P.a,{type:"file-search"})," Log Char")),n.a.createElement("div",null,n.a.createElement(I.b,{to:"/"},n.a.createElement(P.a,{type:"file-done"})," Employees")),n.a.createElement(D.a,null),n.a.createElement("div",null,n.a.createElement(I.b,{to:"/profile"},n.a.createElement(P.a,{type:"user"})," Mi Profile")),n.a.createElement("div",null,n.a.createElement(I.b,{to:"/"},n.a.createElement(P.a,{type:"setting"})," Settings")),n.a.createElement(D.a,null),n.a.createElement("div",{onClick:this.props.handleLogOut},n.a.createElement(I.b,{to:""},n.a.createElement(P.a,{type:"logout"})," Log out"))))}}]),t}(r.Component),q=S.a.Header,F=S.a.Footer,T=S.a.Content,J=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).handleLogOut=function(){var t;t=e.props.history,localStorage.removeItem("token"),b.a.success("Logged out succesfully"),t.push("/login")},e.handleLog=function(t){var a={userId:e.state.user._id,employeeId:t,logName:"Employee consult"};y(a)},e.state={user:{},list:[]},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.getItem("token")?function(e){var t=localStorage.getItem("token");f.a.get("".concat(w,"/auth/loggedin"),{headers:{"x-access-token":t}}).then((function(e){b.a.success(e.data.msg)})).catch((function(t){b.a.error(t.response.data.msg),localStorage.removeItem("token"),e.push("/login")}))}(this.props.history):this.props.history.push("/login");var t=JSON.parse(localStorage.getItem("user"));t?this.setState({user:t}):this.props.history.push("/login");var a=this.state.list;f.a.get("".concat(N,"/employee/list")).then((function(t){a=t.data.list,e.setState({list:a})})).catch((function(e){b.a.error(e.response.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,r=t.user;return n.a.createElement("div",null,n.a.createElement(S.a,null,n.a.createElement(q,null,n.a.createElement(L,{user:r,handleLogOut:this.handleLogOut})),n.a.createElement(T,null,n.a.createElement("div",{className:"cards-envelop"},a.map((function(t,a){return n.a.createElement(E,{key:a,handleLog:e.handleLog,employee:t})})))),n.a.createElement(F,null,"Footer")),n.a.createElement("div",null,n.a.createElement(j.a,{id:"back-top-custom"},n.a.createElement("div",{className:"ant-back-top-inner"},n.a.createElement(P.a,{type:"to-top"})))))}}]),t}(r.Component),A=a(321),H=a(322),R=a(323),_=a(111),B=A.a.Item,M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||O(t,a.props.history)}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"login-envelop"},n.a.createElement("div",null,n.a.createElement("img",{src:"/search.png",alt:"logo"})),n.a.createElement("div",null,n.a.createElement(A.a,{onSubmit:this.handleSubmit,className:"form-envelop"},n.a.createElement("div",null,n.a.createElement("h1",null,"Login")),n.a.createElement(B,null,e("email",{rules:[{required:!0,message:"Por favor ingresa tu email!"}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"user@compareit.com"}))),n.a.createElement(B,null,e("password",{rules:[{required:!0,message:"Ingresa tu contrase\xf1a!"}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Tu contrase\xf1a"}))),n.a.createElement(B,null,e("remember",{valuePropName:"checked",initialValue:!0})(n.a.createElement(R.a,null,"Recu\xe9dame en este dispositivo")),n.a.createElement(I.b,{className:"login-form-forgot",to:"/forgot"},"Olvid\xe9 mi contrase\xf1a"),n.a.createElement(_.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Iniciar sesi\xf3n"),"\xbfNo tienes una cuenta a\xfan? ",n.a.createElement(I.b,{to:"/signup"},"Registrate ahora!")))))}}]),t}(r.Component),W=A.a.create()(M),U=A.a.Item,V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={confirmDirty:!1,autoCompleteResult:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||k(t,a.props.history)}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,r){var n=a.props.form;t&&t!==n.getFieldValue("password")?r("Password missmatch!"):r()},a.validateToNextPassword=function(e,t,r){var n=a.props.form;t&&a.state.confirmDirty&&n.validateFields(["confirm"],{force:!0}),r()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"signup-envelop"},n.a.createElement("div",null,n.a.createElement("img",{src:"/search.png",alt:"logo"})),n.a.createElement("div",null,n.a.createElement(A.a,{onSubmit:this.handleSubmit},n.a.createElement("div",null,n.a.createElement("h1",null,"Signup")),n.a.createElement(U,null,e("name",{rules:[{required:!0,message:"Please enter your name!",whitespace:!0}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"What is your name?"}))),n.a.createElement(U,null,e("email",{rules:[{type:"email",message:"Please enter a valid email!"},{required:!0,message:"Emter your email!"}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"name.surname@mycompany.com"}))),n.a.createElement(U,null,e("department",{rules:[{required:!0,message:"Department is required!"}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Department"}))),n.a.createElement(U,null,e("position",{rules:[{required:!0,message:"Position is required!"}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Position"}))),n.a.createElement(U,null,e("password",{rules:[{required:!0,message:"Please enter your password!"},{validator:this.validateToNextPassword}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Your password"}))),n.a.createElement(U,null,e("confirmPassword",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(n.a.createElement(H.a,{prefix:n.a.createElement(P.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirm your password"}))),n.a.createElement(U,null,e("agreement",{valuePropName:"checked"})(n.a.createElement(R.a,null,"He leido el ",n.a.createElement(I.b,{to:"/agreement"},"acuerdo"))),n.a.createElement(_.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Registrar"),"Ya tienes una cuenta? ",n.a.createElement(I.b,{to:"/login"},"Inicia sesi\xf3n")))))}}]),t}(r.Component),Y=A.a.create()(V),$=function(){return n.a.createElement(c.c,null,n.a.createElement(c.a,{exact:!0,path:"/",render:function(e){return n.a.createElement(J,e)}}),n.a.createElement(c.a,{exact:!0,path:"/signup",render:function(e){return n.a.createElement(Y,e)}}),n.a.createElement(c.a,{exact:!0,path:"/login",render:function(e){return n.a.createElement(W,e)}}))},z=(a(316),Object(c.f)((function(){return n.a.createElement("div",{className:"App"},n.a.createElement($,null))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement((function(){return n.a.createElement(I.a,null,n.a.createElement(z,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[155,1,2]]]);
//# sourceMappingURL=main.290b1e1f.chunk.js.map