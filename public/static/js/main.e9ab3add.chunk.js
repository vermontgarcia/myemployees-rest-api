(this["webpackJsonpmyemployees-react-app"]=this["webpackJsonpmyemployees-react-app"]||[]).push([[0],{194:function(e,t,a){e.exports=a(406)},199:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(5),o=a.n(l),c=(a(199),a(53)),s=a(35),i=a(36),m=a(38),u=a(37),p=a(39),d=a(410),h=d.a.Meta,g=function(e){var t=e.employee,a=e.handleLog;return r.a.createElement("div",{onClick:a.bind(null,t)},r.a.createElement(d.a,{hoverable:!0,className:"employee-card",cover:r.a.createElement("img",{alt:t.name,src:"avatar"===t.profilePicture?"/avatar.png":t.profilePicture})},r.a.createElement(h,{title:t.name,description:t.position})))},E=function(){return r.a.createElement("div",{className:"footer-details-envelop"},r.a.createElement("p",null,"\xa9 2020 My Company, Inc. All Rights Reserved."))},f=a(30),y=a.n(f),v=a(416),b="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",O=function(e){y.a.post("".concat(b,"/log"),e).then((function(e){v.a.success("".concat(e.data.msg,', Type: "').concat(e.data.log.logName,'" at "').concat(Date(e.data.log.created_at),'"'),5)})).catch((function(e){console.log("Log Error =====>",e.response.data.msg)}))},w=function(e){return e?y.a.get("".concat(b,"/log"),{headers:{page:e.page,size:e.size}}):y.a.get("".concat(b,"/log"))},N="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",S=function(e,t){y.a.post("".concat(N,"/auth/signup"),e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user));var a={userId:e.data.user._id,logName:"User signup"};O(a),v.a.success(e.data.message),t.push("/")})).catch((function(e){v.a.error(e.response.data.msg)}))},k=function(e,t){y.a.post("".concat(N,"/auth/login"),e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user));var a={userId:e.data.user._id,logName:"User login"};O(a),v.a.success(e.data.msg),t.push("/")})).catch((function(e){v.a.error(e.response.data.msg)}))},j=function(e){localStorage.removeItem("token"),v.a.success("Logged out succesfully"),e.push("/login")},I=function(e){var t=localStorage.getItem("token");y.a.get("".concat(N,"/auth/loggedin"),{headers:{"x-access-token":t}}).catch((function(t){v.a.error(t.response.data.msg),localStorage.removeItem("token"),e.push("/login")}))},P="localhost"===window.location.hostname?"http://localhost:3500/api":"https://my-employees-2020.herokuapp.com/api",L=a(419),C=a(413),x=a(418),D=a(9),M=a(19),F=a(407),R=a(415),q=a(408),T=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(m.a)(this,Object(u.a)(t).call(this))).showDrawer=function(){e.setState({visible:!0})},e.onClose=function(){e.setState({visible:!1})},e.state={visible:!1,placement:"left"},e}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"mouseHover"},r.a.createElement(D.a,{onClick:this.showDrawer,type:"menu",className:"icon-nav"})),r.a.createElement("div",null,e?r.a.createElement(M.c,{to:"/"},r.a.createElement(F.a,{src:"avatar"===e.profilePicture?"/avatar.png":e.profilePicture})):null),r.a.createElement(R.a,{placement:this.state.placement,closable:!1,onClose:this.onClose,visible:this.state.visible,className:"drawer-wrapper"},r.a.createElement("div",null,r.a.createElement(M.b,{to:"/"},r.a.createElement(D.a,{type:"home"})," Home")),r.a.createElement(q.a,null),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/"},r.a.createElement(D.a,{type:"file-done"})," Employees")),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/logs"},r.a.createElement(D.a,{type:"file-search"})," Logs History")),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/logchart"},r.a.createElement(D.a,{type:"file-search"})," Log Char")),r.a.createElement(q.a,null),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/"},r.a.createElement(D.a,{type:"user"})," My Profile")),r.a.createElement("div",null,r.a.createElement(M.b,{to:"/"},r.a.createElement(D.a,{type:"setting"})," Settings")),r.a.createElement(q.a,null),r.a.createElement("div",{onClick:this.props.handleLogOut},r.a.createElement(M.b,{to:""},r.a.createElement(D.a,{type:"logout"})," Log out"))))}}]),t}(n.Component),A=L.a.Header,H=L.a.Footer,_=L.a.Content,J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleModal=function(){a.showModal()},a.handleCancel=function(){a.setState({visible:!1})},a.handleLogOut=function(){j(a.props.history)},a.handleLoggedIn=function(){localStorage.getItem("token")?I(a.props.history):a.props.history.push("/login");var e=JSON.parse(localStorage.getItem("user"));e?a.setState({user:e}):a.props.history.push("/login")},a.handleLog=function(e){a.handleLoggedIn();var t={userId:a.state.user._id,employeeId:e._id,logName:"Employee consult"};O(t),a.setState({employee:e}),a.showModal()},a.state={user:{},list:[],visible:!1,employee:{}},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.handleLoggedIn();var t=this.state.list;y.a.get("".concat(P,"/employee/list")).then((function(a){t=a.data.list,e.setState({list:t})})).catch((function(e){v.a.error(e.response.data.msg)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.user,l=t.employee,o=t.visible;return r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement(A,null,r.a.createElement(T,{user:n,handleLogOut:this.handleLogOut})),r.a.createElement(_,null,r.a.createElement("h1",{className:"home-title"},"My Company Employees Book"),r.a.createElement("div",{className:"cards-envelop"},a.map((function(t,a){return r.a.createElement(g,{key:a,handleLog:e.handleLog,employee:t})}))),r.a.createElement(C.a,{visible:o,centered:!0,width:700,title:"Employee Details",onCancel:this.handleCancel,footer:null},r.a.createElement("div",{className:"employee-details-envelope"},r.a.createElement("div",{className:"details-card"},r.a.createElement("img",{className:"details-image",src:"avatar"===l.profilePicture?"/avatar.png":l.profilePicture,alt:l.name})),r.a.createElement("div",{className:"details-card details-card-text"},r.a.createElement("p",null,r.a.createElement("span",{className:"details-card-text-tag"},"Name: ")," ",l.name," "),r.a.createElement("p",null,r.a.createElement("span",{className:"details-card-text-tag"},"Department: ")," ",l.department," "),r.a.createElement("p",null,r.a.createElement("span",{className:"details-card-text-tag"},"Position: "),l.position," "),r.a.createElement("p",null,r.a.createElement("span",{className:"details-card-text-tag"},"User type: "),l.role," "),r.a.createElement("p",null," ",l.email," "))))),r.a.createElement(H,null,r.a.createElement(E,null))),r.a.createElement("div",null,r.a.createElement(x.a,{id:"back-top-custom"},r.a.createElement("div",{className:"ant-back-top-inner"},r.a.createElement(D.a,{type:"to-top"})))))}}]),t}(n.Component),z=a(411),U=a(412),W=a(414),B=a(52),V=z.a.Item,Y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||k(t,a.props.history)}))},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login-envelop"},r.a.createElement("div",null,r.a.createElement("img",{src:"/logo192.png",alt:"logo"})),r.a.createElement("div",null,r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"form-envelop"},r.a.createElement("div",null,r.a.createElement("h1",null,"Login")),r.a.createElement(V,null,e("email",{rules:[{required:!0,message:"Please enter your email!"}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"mail",className:"input-icon-color"}),placeholder:"name.surname@mycompany.com"}))),r.a.createElement(V,null,e("password",{rules:[{required:!0,message:"Please enter your password!"}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"lock",className:"input-icon-color"}),type:"password",placeholder:"Your password"}))),r.a.createElement(V,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(W.a,null,"Remember me")),r.a.createElement(M.b,{className:"login-form-forgot",to:"/forgot"},"Forgot my password"),r.a.createElement(B.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Login"),"Not registered yet? ",r.a.createElement(M.b,{to:"/signup"},"Sign up!")))))}}]),t}(n.Component),$=z.a.create()(Y),G=z.a.Item,K=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||S(t,a.props.history)}))},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.compareToFirstPassword=function(e,t,n){var r=a.props.form;t&&t!==r.getFieldValue("password")?n("Password missmatch!"):n()},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"signup-envelop"},r.a.createElement("div",null,r.a.createElement("img",{src:"/logo192.png",alt:"logo"})),r.a.createElement("div",null,r.a.createElement(z.a,{onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("h1",null,"Signup")),r.a.createElement(G,null,e("name",{rules:[{required:!0,message:"Please enter your name!",whitespace:!0}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"user",className:"input-icon-color"}),placeholder:"What is your name?"}))),r.a.createElement(G,null,e("email",{rules:[{type:"email",message:"Please enter a valid email!"},{required:!0,message:"Emter your email!"}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"mail",className:"input-icon-color"}),placeholder:"name.surname@mycompany.com"}))),r.a.createElement(G,null,e("department",{rules:[{required:!0,message:"Department is required!"}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"apartment",className:"input-icon-color"}),placeholder:"Department"}))),r.a.createElement(G,null,e("position",{rules:[{required:!0,message:"Position is required!"}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"team",className:"input-icon-color"}),placeholder:"Position"}))),r.a.createElement(G,null,e("password",{rules:[{required:!0,message:"Please enter your password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"lock",className:"input-icon-color"}),type:"password",placeholder:"Your password"}))),r.a.createElement(G,null,e("confirmPassword",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(U.a,{prefix:r.a.createElement(D.a,{type:"lock",className:"input-icon-color"}),type:"password",placeholder:"Confirm your password"}))),r.a.createElement(G,null,e("agreement",{valuePropName:"checked"})(r.a.createElement(W.a,null,"I have read the ",r.a.createElement(M.b,{to:"/agreement"},"agreement"))),r.a.createElement(B.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"),"Already have an account? ",r.a.createElement(M.b,{to:"/login"},"Login")))))}}]),t}(n.Component),Q=z.a.create()(K),X=a(142),Z=a(61),ee=a(409),te=a(417),ae=L.a.Header,ne=L.a.Footer,re=L.a.Content,le=1;function oe(e){var t=Object(n.useState)([]),a=Object(Z.a)(t,2),l=(a[0],a[1]),o=Object(n.useState)({}),c=Object(Z.a)(o,2),s=c[0],i=c[1],m=Object(n.useState)(!0),u=Object(Z.a)(m,2),p=u[0],d=u[1],h=Object(n.useState)(!1),g=Object(Z.a)(h,2),f=g[0],y=g[1],v=Object(n.useState)([]),b=Object(Z.a)(v,2),O=b[0],N=b[1],S=Object(n.useState)([]),k=Object(Z.a)(S,2),P=k[0],C=k[1],M=function(){console.log(le),w({page:le,size:20}).then((function(e){le++;var t=O.concat(e.data.logs);t.forEach((function(e){var t=new Date(e.created_at),a=Object(X.a)(e.created_at).slice(5,10).join(""),n=t.getHours();e.date=a,e.hour=n})),l(t),N(t),C(t),y(!1)})).then((function(){d(!1)})).catch((function(e){console.log("ERROR =====> ",e)}))};Object(n.useEffect)((function(){!function(){localStorage.getItem("token")?I(e.history):e.history.push("/login");var t=JSON.parse(localStorage.getItem("user"));t?i(t):e.history.push("/login")}(),M()}),[]);var R=p||f?null:r.a.createElement("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"}},r.a.createElement(B.a,{onClick:function(){y(!0);var e=O.concat(Object(X.a)(new Array(20)).map((function(){return{loading:!0,userId:{profilePicture:"avatar",name:""},employeeId:{profilePicture:"avatar",name:""},logName:"",created_at:""}})));C(e),M()}},"Load More"));return r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement(ae,null,r.a.createElement(T,{user:s,handleLogOut:function(){j(e.history)}})),r.a.createElement(re,null,r.a.createElement("h2",null,"Logs History"),r.a.createElement(ee.a,{className:"demo-loadmore-list",loading:p,itemLayout:"horizontal",loadMore:R,dataSource:P,renderItem:function(e){return r.a.createElement(ee.a.Item,{actions:"Employee consult"===e.logName?[r.a.createElement(F.a,{src:e.employeeId.profilePicture})]:[r.a.createElement(F.a,{src:e.userId.profilePicture})]},r.a.createElement(te.a,{avatar:!0,title:!1,loading:e.loading,active:!0},r.a.createElement(ee.a.Item.Meta,{avatar:r.a.createElement(F.a,{src:e.userId.profilePicture}),title:'User "'.concat(e.userId.name,'" generates a historic record"'),description:'Log Type: "'.concat(e.logName,'" at "').concat(e.created_at,'"')})))}})),r.a.createElement(ne,null,r.a.createElement(E,null))),r.a.createElement("div",null,r.a.createElement(x.a,{id:"back-top-custom"},r.a.createElement("div",{className:"ant-back-top-inner"},r.a.createElement(D.a,{type:"to-top"})))))}var ce=a(189),se=new Array(7);se[0]=0,se[1]=0,se[2]=0,se[3]=0,se[4]=0,se[5]=0,se[6]=0;var ie=new Array(7);ie[0]="Sunday",ie[1]="Monday",ie[2]="Tuesday",ie[3]="Wednesday",ie[4]="Thursday",ie[5]="Friday",ie[6]="Saturday";var me=L.a.Header,ue=L.a.Footer,pe=L.a.Content,de=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleLogOut=function(){j(a.props.history)},a.handleLoggedIn=function(){localStorage.getItem("token")?I(a.props.history):a.props.history.push("/login");var e=JSON.parse(localStorage.getItem("user"));console.log("User =====> ",e),e?a.setState({user:e}):a.props.history.push("/login")},a.handleRequest=function(){w().then((function(e){var t=e.data.logs,n=se,r=ie;t.forEach((function(e){var t=new Date(e.created_at);n[t.getDay()]=n[t.getDay()]+1})),a.setState({weekday:r}),a.setState({timesPerDay:n}),a.setChart()})).catch((function(e){console.log("ERROR =====> ",e)}))},a.setChart=function(){var e=a.state,t={labels:e.weekday,datasets:[{label:"Hour",fill:!1,lineTension:0,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,0,1)",borderWidth:2,data:e.timesPerDay}]};a.setState({data:t})},a.state={user:{},data:{},weekday:[],timesPerDay:[]},a}return Object(p.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.handleLoggedIn(),this.handleRequest()}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.data;return r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement(me,null,r.a.createElement(T,{user:t,handleLogOut:this.handleLogOut})),r.a.createElement(pe,null,r.a.createElement(ce.a,{data:a,options:{title:{display:!0,text:"Logs vs Day",fontSize:20},legend:{display:!1,position:"right"}}})),r.a.createElement(ue,null,r.a.createElement(E,null))))}}]),t}(n.Component),he=function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",render:function(e){return r.a.createElement(J,e)}}),r.a.createElement(c.a,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(Q,e)}}),r.a.createElement(c.a,{exact:!0,path:"/login",render:function(e){return r.a.createElement($,e)}}),r.a.createElement(c.a,{exact:!0,path:"/logs",render:function(e){return r.a.createElement(oe,e)}}),r.a.createElement(c.a,{exact:!0,path:"/logchart",render:function(e){return r.a.createElement(de,e)}}))},ge=(a(405),Object(c.f)((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(he,null))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){return r.a.createElement(M.a,null,r.a.createElement(ge,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[194,1,2]]]);
//# sourceMappingURL=main.e9ab3add.chunk.js.map